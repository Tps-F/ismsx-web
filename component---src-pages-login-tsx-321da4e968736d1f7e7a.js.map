{"version":3,"file":"component---src-pages-login-tsx-321da4e968736d1f7e7a.js","mappings":"6IA6EA,UAtEuCA,KACtC,MAAM,kBAAEC,IAAsBC,EAAAA,EAAAA,MACxB,EAACC,EAAK,EAAEC,IAAYC,EAAAA,EAAAA,UAAS,KAC7B,EAACC,EAAQ,EAAEC,IAAeF,EAAAA,EAAAA,UAAS,IAWzC,OACCG,EAAAA,cAAAA,EAAAA,SAAA,KACCA,EAAAA,cAAA,OAAKC,UAAU,wDACdD,EAAAA,cAAA,OAAKC,UAAU,yCACdD,EAAAA,cAAA,MAAIC,UAAU,wEAAuE,SAGrFD,EAAAA,cAAA,QACCE,SAjBYC,UAChBC,EAAMC,iBACN,UACOZ,EAAkBE,EAAOG,IAC/BQ,EAAAA,EAAAA,IAAS,QACV,CAAE,MAAOC,GACRC,QAAQD,MAAM,eACf,GAWIN,UAAU,sCAEVD,EAAAA,cAAA,OAAKC,UAAU,kCACdD,EAAAA,cAAA,OAAKC,UAAU,IACdD,EAAAA,cAAA,SACCS,QAAQ,QACRR,UAAU,wDACV,SAGDD,EAAAA,cAAA,SACCU,KAAK,QACLC,MAAOhB,EACPiB,SAAWC,GAAMjB,EAASiB,EAAEC,OAAOH,OACnCI,KAAK,QACLd,UAAU,2FAGZD,EAAAA,cAAA,OAAKC,UAAU,IACdD,EAAAA,cAAA,SACCS,QAAQ,WACRR,UAAU,wDACV,YAGDD,EAAAA,cAAA,SACCU,KAAK,WACLC,MAAOb,EACPc,SAAWC,GAAMd,EAAYc,EAAEC,OAAOH,OACtCI,KAAK,WACLd,UAAU,2FAGZD,EAAAA,cAAA,UACCU,KAAK,SACLT,UAAU,+GACV,aAOH,C,+ECtEE,MAAMP,EAAUA,KA4Bf,CACND,kBA5ByBU,MAAOR,EAAeG,KAC/C,IACC,MAAM,KAAEkB,EAAI,MAAET,SAAgBU,EAAAA,EAASC,KAAKC,mBAAmB,CAC9DxB,MAAOA,EACPG,SAAUA,IAEX,GAAIS,EACH,MAAM,IAAIa,MAAMb,EAAMc,SAEvB,OAAOL,CACR,CAAE,MAAOT,GAER,MADAC,QAAQD,MAAMA,GACRA,CACP,GAgBAe,QAbenB,UACf,IACC,MACCa,MAAM,KAAEO,GAAM,MACdhB,SACSU,EAAAA,EAASC,KAAKM,UACpBjB,IAAOD,EAAAA,EAAAA,IAAS,SACrB,CAAE,MAAOC,GACRC,QAAQD,MAAMA,EACf,I","sources":["webpack://isshin/./src/pages/login.tsx","webpack://isshin/./src/utils/auth.ts"],"sourcesContent":["import type { HeadFC, PageProps } from \"gatsby\";\nimport { StaticImage } from \"gatsby-plugin-image\";\nimport { navigate } from \"gatsby\";\nimport React, { FormEventHandler, useState } from \"react\";\n\nimport { useAuth } from \"../utils/auth\";\n\nconst loginPage: React.FC<PageProps> = () => {\n\tconst { loginWithPassword } = useAuth();\n\tconst [email, setEmail] = useState(\"\");\n\tconst [password, setPassword] = useState(\"\");\n\n\tconst onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n\t\tevent.preventDefault();\n\t\ttry {\n\t\t\tawait loginWithPassword(email, password);\n\t\t\tnavigate(\"/post\");\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Login failed\");\n\t\t}\n\t};\n\treturn (\n\t\t<>\n\t\t\t<div className=\"min-h-screen py-6 sm:py-8 lg:py-12 font-caviardreams\">\n\t\t\t\t<div className=\"mx-auto max-w-screen-2xl px-4 md:px-8\">\n\t\t\t\t\t<h2 className=\"mb-4 text-center text-sl font-bold text-gray-800 md:mb-8 lg:text-3xl\">\n\t\t\t\t\t\tLogin\n\t\t\t\t\t</h2>\n\t\t\t\t\t<form\n\t\t\t\t\t\tonSubmit={onSubmit}\n\t\t\t\t\t\tclassName=\"mx-auto max-w-lg rounded-lg border\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"flex flex-col gap-4 p-4 md:p-8\">\n\t\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"email\"\n\t\t\t\t\t\t\t\t\tclassName=\"mb-2 inline-block text-sm text-blue-800 sm:text-base\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\temail\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full rounded border bg-gray-50 px-3 py-2 text-gray-800 outline-none ring-indigo-300\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"password\"\n\t\t\t\t\t\t\t\t\tclassName=\"mb-2 inline-block text-sm text-gray-800 sm:text-base\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tpassword\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full rounded border bg-gray-50 px-3 py-2 text-gray-800 outline-none ring-indigo-300\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tclassName=\"block rounded-lg bg-gray-800 px-8 oy-3 text-center text-sm font-bold text-white outline-none ring-gray-300 \"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tLogin\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default loginPage;\n","import { navigate } from \"gatsby\";\nimport { supabase } from \"./supabase\";\n\nexport const useAuth = () => {\n\tconst loginWithPassword = async (email: string, password: string) => {\n\t\ttry {\n\t\t\tconst { data, error } = await supabase.auth.signInWithPassword({\n\t\t\t\temail: email,\n\t\t\t\tpassword: password,\n\t\t\t});\n\t\t\tif (error) {\n\t\t\t\tthrow new Error(error.message);\n\t\t\t}\n\t\t\treturn data;\n\t\t} catch (error) {\n\t\t\tconsole.error(error as Error);\n\t\t\tthrow error;\n\t\t}\n\t};\n\n\tconst isLogin = async () => {\n\t\ttry {\n\t\t\tconst {\n\t\t\t\tdata: { user },\n\t\t\t\terror,\n\t\t\t} = await supabase.auth.getUser();\n\t\t\tif (error) navigate(\"/login\");\n\t\t} catch (error) {\n\t\t\tconsole.error(error as Error);\n\t\t}\n\t};\n\treturn {\n\t\tloginWithPassword,\n\t\tisLogin,\n\t};\n};\n"],"names":["loginPage","loginWithPassword","useAuth","email","setEmail","useState","password","setPassword","React","className","onSubmit","async","event","preventDefault","navigate","error","console","htmlFor","type","value","onChange","e","target","name","data","supabase","auth","signInWithPassword","Error","message","isLogin","user","getUser"],"sourceRoot":""}